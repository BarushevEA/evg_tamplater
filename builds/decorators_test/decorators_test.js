(()=>{"use strict";var e={969:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchCase=void 0,t.SwitchCase=class{pipe;counter;constructor(e){this.pipe=e,this.counter=e.chain.length?e.chain.length:0}case(e){this.counter++;const t=this.counter,s=this.pipe.chain;return s.push((r=>{r.isAvailable=!0,e(r.payload)&&(r.isBreak=!0),t!==s.length||r.isBreak||(r.isAvailable=!1)})),this}pushCases(e){if(!Array.isArray(e))return this;for(let t=0;t<e.length;t++)this.case(e[t]);return this}}},512:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Collector=void 0;const r=s(951);t.Collector=class{list=[];isKilled=!1;collect(...e){this.isKilled||this.list.push(...e)}unsubscribe(e){this.isKilled||(e?.unsubscribe(),(0,r.quickDeleteFromArray)(this.list,e))}unsubscribeAll(){if(!this.isKilled)for(;this.list.length>0;)this.unsubscribe(this.list.pop())}size(){return this.isKilled?0:this.list.length}destroy(){this.unsubscribeAll(),this.list.length=0,this.list=0,this.isKilled=!0}get isDestroyed(){return this.isKilled}}},817:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FilterSwitchCase=t.FilterCollection=void 0;const r=s(969);t.FilterCollection=class{chain=[];flow={isBreak:!1,isAvailable:!1,payload:null};response={isOK:!1,payload:void 0};errHandler;get isEmpty(){return!this.chain.length}push(e){return this.chain.push(e),this}filter(e){return this.push((t=>{e(t.payload)&&(t.isAvailable=!0)}))}pushFilters(e){if(!Array.isArray(e))return this;for(let t=0;t<e.length;t++)this.filter(e[t]);return this}switch(){return new i(this)}processChain(e){const t=this.chain,s=this.flow,r=this.response;r.isOK=!1,r.payload=void 0,s.payload=e,s.isBreak=!1;try{for(let e=0;e<t.length;e++){if(s.isAvailable=!1,t[e](s),!s.isAvailable)return r;if(s.isBreak)break}}catch(e){return this.errHandler?this.errHandler(e,"Filter.processChain ERROR:"):console.log("Filter.processChain ERROR:",e),r}return r.isOK=!0,r.payload=s.payload,r}addErrorHandler(e){this.errHandler=e}};class i extends r.SwitchCase{}t.FilterSwitchCase=i},951:(e,t)=>{function s(e){return"next"in e?t=>e.next(t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.getListener=t.quickDeleteFromArray=t.deleteFromArray=t.sortDescending=t.sortAscending=void 0,t.sortAscending=(e,t)=>e.order>t.order?1:e.order<t.order?-1:0,t.sortDescending=(e,t)=>e.order>t.order?-1:e.order<t.order?1:0,t.deleteFromArray=function(e,t){const s=e.indexOf(t);return-1!==s&&(e.splice(s,1),!0)},t.quickDeleteFromArray=function(e,t){const s=e.indexOf(t);return-1!==s&&(e[s]=e[e.length-1],e.length=e.length-1,!0)},t.getListener=function(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(s(e[r]));return e=>{for(let s=0;s<t.length;s++)t[s](e)}}return s(e)}},390:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;const r=s(951),i=s(528),n=s(817);t.Observable=class{value;listeners=[];isStop=!0;isKilled=!1;isProcess=!1;trash=[];filters=new n.FilterCollection;constructor(e){this.value=e}addFilter(e){return e&&this.filters.addErrorHandler(e),this.filters}disable(){this.isStop=!1}enable(){this.isStop=!0}get isEnable(){return this.isStop}next(e){if(!this.isKilled&&this.isStop&&(this.filters.isEmpty||this.filters.processChain(e).isOK)){this.isProcess=!0,this.value=e;for(let t=0;t<this.listeners.length;t++)this.listeners[t].send(e);this.isProcess=!1,this.trash.length&&this.handleListenersForUnsubscribe()}}stream(e){if(!this.isKilled&&this.isStop)for(let t=0;t<e.length;t++)this.next(e[t])}handleListenersForUnsubscribe(){const e=this.trash.length;for(let t=0;t<e;t++)this.unSubscribe(this.trash[t]);this.trash.length=0}unSubscribe(e){this.isKilled||(this.isProcess&&e?this.trash.push(e):this.listeners&&(0,r.quickDeleteFromArray)(this.listeners,e))}destroy(){this.value=null,this.unsubscribeAll(),this.listeners=null,this.isKilled=!0}unsubscribeAll(){this.isKilled||(this.listeners.length=0)}getValue(){if(!this.isKilled)return this.value}size(){return this.isKilled?0:this.listeners.length}subscribe(e,t){if(!this.isListener(e))return;const s=new i.SubscribeObject(this,!1);return this.addObserver(s,e,t),s}addObserver(e,t,s){e.subscribe(t,s),this.listeners.push(e)}isListener(e){return!this.isKilled&&!!e}pipe(){if(this.isKilled)return;const e=new i.SubscribeObject(this,!0);return this.listeners.push(e),e}get isDestroyed(){return this.isKilled}}},735:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderedObservable=void 0;const r=s(390),i=s(951),n=s(183);class a extends r.Observable{sortDirection=i.sortAscending;setAscendingSort(){return this.sortDirection=i.sortAscending,this.sortByOrder()}setDescendingSort(){return this.sortDirection=i.sortDescending,this.sortByOrder()}sortByOrder(){return!this.isKilled&&(this.listeners.sort(this.sortDirection),!0)}subscribe(e,t){if(!this.isListener(e))return;const s=new n.OrderedSubscribeObject(this,!1);return this.addObserver(s,e,t),s}pipe(){if(this.isKilled)return;const e=new n.OrderedSubscribeObject(this,!0);return this.listeners.push(e),e}unSubscribe(e){this.isKilled||(this.isProcess&&e?this.trash.push(e):this.listeners&&(0,i.deleteFromArray)(this.listeners,e))}}t.OrderedObservable=a},183:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderedSubscribeObject=void 0;const r=s(528);class i extends r.SubscribeObject{constructor(e,t){super(e,t)}get order(){return this._order}set order(e){!this.observable||this.observable&&this.observable.isDestroyed?this._order=void 0:(this._order=e,this.observable.sortByOrder())}subscribe(e,t){return super.subscribe(e,t),this}setOnce(){return super.setOnce()}}t.OrderedSubscribeObject=i},375:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PipeSwitchCase=t.Pipe=void 0;const r=s(969);t.Pipe=class{chain=[];flow={isBreak:!1,isUnsubscribe:!1,isAvailable:!1,payload:null};push(e){return this.chain.push(e),this}setOnce(){return this.push((e=>{this.listener(e.payload),e.isUnsubscribe=!0}))}unsubscribeBy(e){return this.push((t=>{t.isAvailable=!0,e(t.payload)&&(t.isUnsubscribe=!0)}))}refine(e){return this.push((t=>{e(t.payload)&&(t.isAvailable=!0)}))}pushRefiners(e){if(!Array.isArray(e))return this;for(let t=0;t<e.length;t++)this.refine(e[t]);return this}switch(){return new i(this)}then(e){return this.push((t=>{t.payload=e(t.payload),t.isAvailable=!0}))}serialize(){return this.push((e=>{e.payload=JSON.stringify(e.payload),e.isAvailable=!0}))}deserialize(){return this.push((e=>{e.payload=JSON.parse(e.payload),e.isAvailable=!0}))}processChain(e){const t=this.chain,s=this.flow;for(let e=0;e<t.length;e++){if(s.isUnsubscribe=!1,s.isAvailable=!1,t[e](s),s.isUnsubscribe)return this.unsubscribe();if(!s.isAvailable)return;if(s.isBreak)break}return e(s.payload)}};class i extends r.SwitchCase{subscribe(e,t){return this.pipe.subscribe(e,t)}}t.PipeSwitchCase=i},528:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SubscribeObject=void 0;const r=s(375),i=s(951);class n extends r.Pipe{observable;listener;errorHandler=(e,t)=>{console.log(`(Unit of SubscribeObject).send(${e}) ERROR:`,t)};_order=0;isPaused=!1;isPipe=!1;constructor(e,t){super(),this.observable=e,this.isPipe=!!t}subscribe(e,t){return this.listener=(0,i.getListener)(e),t&&(this.errorHandler=t),this}unsubscribe(){this.observable&&(this.observable.unSubscribe(this),this.observable=null,this.listener=null,this.chain.length=0)}send(e){try{this.flow.payload=e,this.flow.isBreak=!1,this.processValue(e)}catch(t){this.errorHandler(e,t)}}resume(){this.isPaused=!1}pause(){this.isPaused=!0}get order(){return this._order}set order(e){this._order=e}processValue(e){const t=this.listener;return t?this.observable&&!this.isPaused?this.isPipe?this.processChain(t):t(e):void 0:this.unsubscribe()}}t.SubscribeObject=n},47:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.quickDeleteFromArray=t.deleteFromArray=t.Collector=t.OrderedObservable=t.Observable=void 0;var r=s(390);Object.defineProperty(t,"Observable",{enumerable:!0,get:function(){return r.Observable}});var i=s(735);Object.defineProperty(t,"OrderedObservable",{enumerable:!0,get:function(){return i.OrderedObservable}});var n=s(512);Object.defineProperty(t,"Collector",{enumerable:!0,get:function(){return n.Collector}});var a=s(951);Object.defineProperty(t,"deleteFromArray",{enumerable:!0,get:function(){return a.deleteFromArray}});var o=s(951);Object.defineProperty(t,"quickDeleteFromArray",{enumerable:!0,get:function(){return o.quickDeleteFromArray}})},854:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractGenerator=void 0;const r=s(390),i=s(598),n=s(340);t.AbstractGenerator=class{state$=new r.Observable(i.EState.UNDEFINED);get state(){return this.state$.isDestroyed?i.EState.DESTROYED:this.state$.getValue()??i.EState.UNDEFINED}start(){if(this.isDestroyed())return(0,n.getNegativeStatus)(i.EState.DESTROYED);const e=this.startProcess();return e.isApplied?this.getPositive(e):e}stop(){if(this.isDestroyed())return(0,n.getNegativeStatus)(i.EState.DESTROYED);const e=this.stopProcess();return e.isApplied?this.getPositive(e):e}destroy(){return this.stop(),this.state$.next(i.EState.DESTROYED),this.state$.destroy(),(0,n.getPositiveStatus)(i.EState.DESTROYED)}subscribeOnState(e){if(!this.isDestroyed())return this.state$.subscribe(e)}subscribeOnProcess(e){if(!this.isDestroyed())return this.state$.pipe()?.refine((e=>e===i.EState.PROCESS)).subscribe(e)}isDestroyed(){return this.state===i.EState.DESTROYED}getPositive(e){return this.state$.next(e.state),(0,n.getPositiveStatus)(e.state)}}},993:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractOrderedGenerator=void 0;const r=s(854),i=s(735),n=s(598);class a extends r.AbstractGenerator{state$=new i.OrderedObservable(n.EState.UNDEFINED);subscribeOnState(e){if(!this.isDestroyed())return this.state$.subscribe(e)}subscribeOnProcess(e){if(!this.isDestroyed())return this.state$.pipe()?.refine((e=>e===n.EState.PROCESS)).subscribe(e)}}t.AbstractOrderedGenerator=a},598:(e,t)=>{var s,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR=t.EState=void 0,function(e){e.INIT="INIT",e.STARTED="STARTED",e.STOPPED="STOPPED",e.PROCESS="PROCESS",e.DESTROYED="DESTROYED",e.UNDEFINED="UNDEFINED",e.DELETED="DELETED",e.READY="READY"}(s||(t.EState=s={})),function(e){e.NEGATIVE_DELAY="Delay must be a positive number.",e.TYPE_INVALID="TYPE_INVALID",e.NAME_IS_NOT_PRESENT="NAME_IS_NOT_PRESENT",e.INSTANCE_DESTROYED="INSTANCE_DESTROYED"}(r||(t.ERROR=r={}))},875:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GAnimationFrame=void 0;const r=s(598),i=s(340),n=s(854);class a extends n.AbstractGenerator{rafId;fps;constructor(){super(),this.fps=60,this.rafId=null}setFPS(e){return this.isDestroyed()?(0,i.getNegativeStatus)(r.EState.DESTROYED):this.rafId?(0,i.getNegativeStatus)(r.EState.STARTED):e<1?(0,i.getNegativeStatus)(r.ERROR.NEGATIVE_DELAY):(this.fps=e,(0,i.getPositiveStatus)(this.state))}set60fps(){return this.setFPS(60)}set30fps(){return this.setFPS(30)}setDefault(){return this.setFPS(60)}startProcess(){if(this.rafId)return(0,i.getNegativeStatus)(r.EState.STARTED);let e=Math.floor(performance.now());const t=Math.floor(1e3/this.fps),s=i=>{i=Math.floor(i),this.rafId=requestAnimationFrame(s);const n=i-e;n>=t&&(e=i-n%t,this.state$.next(r.EState.PROCESS))};return this.rafId=requestAnimationFrame(s),this.state$.next(r.EState.STARTED),(0,i.getPositiveStatus)(r.EState.STARTED)}stopProcess(){return this.rafId?(cancelAnimationFrame(this.rafId),this.rafId=null,this.state$.next(r.EState.STOPPED),(0,i.getPositiveStatus)(r.EState.STOPPED)):(0,i.getNegativeStatus)(r.ERROR.NEGATIVE_DELAY)}}t.GAnimationFrame=a},462:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GAnimationFrameOrdered=void 0;const r=s(598),i=s(340),n=s(993);class a extends n.AbstractOrderedGenerator{rafId=null;fps=60;constructor(){super(),this.rafId=null}setFPS(e){return this.isDestroyed()?(0,i.getNegativeStatus)(r.EState.DESTROYED):this.rafId?(0,i.getNegativeStatus)(r.EState.STARTED):e<1?(0,i.getNegativeStatus)(r.ERROR.NEGATIVE_DELAY):(this.fps=e,(0,i.getPositiveStatus)(this.state))}set60fps(){return this.setFPS(60)}set30fps(){return this.setFPS(30)}setDefault(){return this.setFPS(60)}startProcess(){if(this.rafId)return(0,i.getNegativeStatus)(r.EState.STARTED);let e=Math.floor(performance.now());const t=Math.floor(1e3/this.fps),s=i=>{i=Math.floor(i),this.rafId=requestAnimationFrame(s);const n=i-e;n>=t&&(e=i-n%t,this.state$.next(r.EState.PROCESS))};return this.rafId=requestAnimationFrame(s),this.state$.next(r.EState.STARTED),(0,i.getPositiveStatus)(r.EState.STARTED)}stopProcess(){return this.rafId?(cancelAnimationFrame(this.rafId),this.rafId=null,this.state$.next(r.EState.STOPPED),(0,i.getPositiveStatus)(r.EState.STOPPED)):(0,i.getNegativeStatus)(r.ERROR.NEGATIVE_DELAY)}}t.GAnimationFrameOrdered=a},761:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GInterval=void 0;const r=s(598),i=s(340),n=s(854);class a extends n.AbstractGenerator{intervalId=0;delay=0;constructor(){super()}setInterval(e){return this.isDestroyed()?(0,i.getNegativeStatus)(r.EState.DESTROYED):this.intervalId?(0,i.getNegativeStatus)(r.EState.STARTED):e<0?(0,i.getNegativeStatus)(r.ERROR.NEGATIVE_DELAY):(this.delay=e,this.state$.next(r.EState.INIT),(0,i.getPositiveStatus)(r.EState.INIT))}startProcess(){return this.intervalId=setInterval((()=>{this.state$.next(r.EState.PROCESS)}),this.delay),this.state$.next(r.EState.STARTED),(0,i.getPositiveStatus)(r.EState.STARTED)}stopProcess(){return clearInterval(this.intervalId),this.intervalId=0,this.state$.next(r.EState.STOPPED),(0,i.getPositiveStatus)(r.EState.STOPPED)}}t.GInterval=a},308:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GIntervalOrdered=void 0;const r=s(598),i=s(340),n=s(993);class a extends n.AbstractOrderedGenerator{intervalId=0;delay=0;constructor(){super()}setInterval(e){return this.isDestroyed()?(0,i.getNegativeStatus)(r.EState.DESTROYED):this.intervalId?(0,i.getNegativeStatus)(r.EState.STARTED):e<0?(0,i.getNegativeStatus)(r.ERROR.NEGATIVE_DELAY):(this.delay=e,this.state$.next(r.EState.INIT),(0,i.getPositiveStatus)(r.EState.INIT))}startProcess(){return this.intervalId=setInterval((()=>{this.state$.next(r.EState.PROCESS)}),this.delay),this.state$.next(r.EState.STARTED),(0,i.getPositiveStatus)(r.EState.STARTED)}stopProcess(){return clearInterval(this.intervalId),this.intervalId=0,this.state$.next(r.EState.STOPPED),(0,i.getPositiveStatus)(r.EState.STOPPED)}}t.GIntervalOrdered=a},491:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GMeter=void 0;const r=s(598),i=s(761),n=s(340);function a(e){const t=e._counter;e.countOfUsesPerMinute=t.minutes,e.countOfUsesPerMinuteMax=(0,n.getMaxNum)(e.countOfUsesPerMinuteMax,t.minutes),e.countOfUsesPerMinuteMin=(0,n.getMinNumNotZero)(e.countOfUsesPerMinuteMin,t.minutes),e.countOfUsesPerMinuteAvg=(0,n.getAvgNum)(e.countOfUsesPerMinuteAvg,t.minutes)}function o(e){const t=e._counter;e.countOfUsesPerHour=t.hours,e.countOfUsesPerHourMax=(0,n.getMaxNum)(e.countOfUsesPerHourMax,t.hours),e.countOfUsesPerHourMin=(0,n.getMinNumNotZero)(e.countOfUsesPerHourMin,t.hours),e.countOfUsesPerHourAvg=(0,n.getAvgNum)(e.countOfUsesPerHourAvg,t.hours)}function u(e){const t=e._counter;e.countOfUsesPerDay=t.days,e.countOfUsesPerDayMax=(0,n.getMaxNum)(e.countOfUsesPerDayMax,t.days),e.countOfUsesPerDayMin=(0,n.getMinNumNotZero)(e.countOfUsesPerDayMin,t.days),e.countOfUsesPerDayAvg=(0,n.getAvgNum)(e.countOfUsesPerDayAvg,t.days)}t.GMeter=class{metrics;_state;perSecondTimer;perMinuteTimer;perHourTimer;perDayTimer;constructor(){this.metrics={},this._state=r.EState.STOPPED,this.perSecondTimer=new i.GInterval,this.perSecondTimer.setInterval(1e3),this.perMinuteTimer=new i.GInterval,this.perMinuteTimer.setInterval(6e4),this.perHourTimer=new i.GInterval,this.perHourTimer.setInterval(36e5),this.perDayTimer=new i.GInterval,this.perDayTimer.setInterval(864e5)}start(){return this.isDestroyed()?(0,n.getNegativeStatus)(r.ERROR.INSTANCE_DESTROYED):this._state===r.EState.STARTED?(0,n.getNegativeStatus)(r.EState.STARTED):(this.perSecondTimer.start(),this.perMinuteTimer.start(),this.perHourTimer.start(),this.perDayTimer.start(),this._state=r.EState.STARTED,(0,n.getPositiveStatus)(r.EState.STARTED))}stop(){if(this.isDestroyed())return(0,n.getNegativeStatus)(r.ERROR.INSTANCE_DESTROYED);this.perSecondTimer.stop(),this.perMinuteTimer.stop(),this.perHourTimer.stop(),this.perDayTimer.stop();for(const e in this.metrics){const t=this.metrics[e];t._counter.days=0,t._counter.hours=0,t._counter.minutes=0,t._counter.seconds=0}return this._state=r.EState.STOPPED,(0,n.getPositiveStatus)(r.EState.STOPPED)}destroy(){return this.isDestroyed()?(0,n.getNegativeStatus)(r.ERROR.INSTANCE_DESTROYED):(this.stop(),this.clearFunc(),this.perSecondTimer.destroy(),this.perMinuteTimer.destroy(),this.perHourTimer.destroy(),this.perDayTimer.destroy(),this._state=r.EState.DESTROYED,(0,n.getPositiveStatus)(r.EState.DESTROYED))}isDestroyed(){return this._state===r.EState.DESTROYED}deleteFunc(e){if(this.isDestroyed())return(0,n.getNegativeStatus)(r.ERROR.INSTANCE_DESTROYED);if(e in this.metrics){const t=this.metrics[e];return t._deleteObj.isDeleted=!0,t._deleteObj=null,delete this.metrics[e],(0,n.getPositiveStatus)(r.EState.DELETED)}return(0,n.getNegativeStatus)(r.ERROR.NAME_IS_NOT_PRESENT)}clearFunc(){const e=[];for(const t in this.metrics)e.push(t);for(const t of e)this.deleteFunc(t)}decorate(e,t){const{deleteObj:s,metric:i}=this.createMetric(e);return(...e)=>{if(s.isDeleted)return t(...e);const n=Date.now();this.trackMetric(i);try{return t(...e)}catch(e){throw s.isDeleted||this._state!==r.EState.STARTED||i.countOfErrors++,e}finally{s.isDeleted||this._state!==r.EState.STARTED||(i.timePerCall=Date.now()-n,i.totalExecutionTime+=i.timePerCall)}}}decorateAsync(e,t){const{deleteObj:s,metric:i}=this.createMetric(e);return async(...e)=>{if(s.isDeleted)return await t(...e);const n=Date.now();this.trackMetric(i);try{return await t(...e)}catch(e){throw s.isDeleted||this._state!==r.EState.STARTED||i.countOfErrors++,e}finally{s.isDeleted||this._state!==r.EState.STARTED||(i.timePerCall=Date.now()-n,i.totalExecutionTime+=i.timePerCall)}}}trackMetric(e){this._state===r.EState.STARTED&&(e.countOfUses++,e._counter.seconds++,e._counter.minutes++,e._counter.hours++,e._counter.days++)}createMetric(e){if(e in this.metrics)throw new Error(`A function with the name "${e}" is already decorated`);if(this.isDestroyed())throw new Error(r.ERROR.INSTANCE_DESTROYED);const t={isDeleted:!1};this.metrics[e]={countOfUses:0,countOfErrors:0,totalExecutionTime:0,timePerCall:0,countOfUsesPerSecond:0,countOfUsesPerMinute:0,countOfUsesPerHour:0,countOfUsesPerDay:0,countOfUsesPerDayAvg:0,countOfUsesPerDayMax:0,countOfUsesPerDayMin:0,countOfUsesPerHourAvg:0,countOfUsesPerHourMax:0,countOfUsesPerHourMin:0,countOfUsesPerMinuteAvg:0,countOfUsesPerMinuteMax:0,countOfUsesPerMinuteMin:0,countOfUsesPerSecondAvg:0,countOfUsesPerSecondMax:0,countOfUsesPerSecondMin:0,_deleteObj:t,_counter:{seconds:0,minutes:0,hours:0,days:0}};const s=this.metrics[e];return this.addTimers(t,s),{deleteObj:t,metric:s}}addTimers(e,t){const s=t._counter;this.addTimer(e,this.perSecondTimer,(()=>{!function(e){const t=e._counter;e.countOfUsesPerSecond=t.seconds,e.countOfUsesPerSecondMax=(0,n.getMaxNum)(e.countOfUsesPerSecondMax,t.seconds),e.countOfUsesPerSecondMin=(0,n.getMinNumNotZero)(e.countOfUsesPerSecondMin,t.seconds),e.countOfUsesPerSecondAvg=(0,n.getAvgNum)(e.countOfUsesPerSecondAvg,t.seconds)}(t),a(t),o(t),u(t),s.seconds=0})),this.addTimer(e,this.perMinuteTimer,(()=>{a(t),o(t),u(t),s.minutes=0})),this.addTimer(e,this.perHourTimer,(()=>{o(t),u(t),s.hours=0})),this.addTimer(e,this.perDayTimer,(()=>{u(t),s.days=0}))}addTimer(e,t,s){const r=t.subscribeOnProcess((()=>{e.isDeleted?r?.unsubscribe():s()}))}getMetrics(e){const t={...this.metrics[e]};return delete t._deleteObj,delete t._counter,t}getAll(){const e={};for(const t in this.metrics)e[t]=this.getMetrics(t);return e}get length(){return Object.keys(this.metrics).length}get state(){return this._state}}},261:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GTimeout=void 0;const r=s(598),i=s(340),n=s(854);class a extends n.AbstractGenerator{delay=0;timerId=0;constructor(){super()}setTimeout(e){return this.isDestroyed()?(0,i.getNegativeStatus)(r.EState.DESTROYED):this.timerId?(0,i.getNegativeStatus)(r.EState.STARTED):e<0?(0,i.getNegativeStatus)(r.ERROR.NEGATIVE_DELAY):(this.delay=e,this.state$.next(r.EState.INIT),(0,i.getPositiveStatus)(r.EState.INIT))}startProcess(){return this.timerId=setTimeout((()=>{this.state$.next(r.EState.PROCESS),this.state$.next(r.EState.STOPPED)}),this.delay),this.state$.next(r.EState.STARTED),(0,i.getPositiveStatus)(r.EState.STARTED)}stopProcess(){return clearTimeout(this.timerId),this.timerId=0,this.state$.next(r.EState.STOPPED),(0,i.getPositiveStatus)(r.EState.STOPPED)}}t.GTimeout=a},888:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GTimeoutOrdered=void 0;const r=s(598),i=s(340),n=s(993);class a extends n.AbstractOrderedGenerator{delay=0;timerId=0;constructor(){super()}setTimeout(e){return this.isDestroyed()?(0,i.getNegativeStatus)(r.EState.DESTROYED):this.timerId?(0,i.getNegativeStatus)(r.EState.STARTED):e<0?(0,i.getNegativeStatus)(r.ERROR.NEGATIVE_DELAY):(this.delay=e,this.state$.next(r.EState.INIT),(0,i.getPositiveStatus)(r.EState.INIT))}startProcess(){return this.timerId=setTimeout((()=>{this.state$.next(r.EState.PROCESS),this.state$.next(r.EState.STOPPED)}),this.delay),this.state$.next(r.EState.STARTED),(0,i.getPositiveStatus)(r.EState.STARTED)}stopProcess(){return clearTimeout(this.timerId),this.timerId=0,this.state$.next(r.EState.STOPPED),(0,i.getPositiveStatus)(r.EState.STOPPED)}}t.GTimeoutOrdered=a},31:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultMeasureMeter=t.Measure=void 0;const r=new(s(491).GMeter);t.Measure=function(e,t){const s=t||r;return s.start(),function(t,r,i){const n=i.value;let a=t.name||"this";const o=Object.prototype.toString.call(n),u=n[Symbol.toStringTag];let c;if("[object AsyncFunction]"===o||"AsyncFunction"===u){const t=e||`Async method: ${a}.${r}`;i.value=function(...e){return!c&&(c=s.decorateAsync(t,(e=>n.apply(this,e)))),c(e)}}else{const t=e||`Sync method: ${a}.${r}`;i.value=function(...e){return!c&&(c=s.decorate(t,(e=>n.apply(this,e)))),c(e)}}}},t.getDefaultMeasureMeter=function(){return r}},258:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TickCounter=void 0;const r=s(598),i=s(47),n=s(340);t.TickCounter=class{subject;_state=r.EState.UNDEFINED;defaultPeriodMs=1e3;periodMs=0;timer;sum=0;counter=0;counter$=new i.Observable(this.counter);subscriber;constructor(e){this.subject=e,this.init()}init(){this._state=r.EState.INIT,this.resetPeriod()}get state(){return this._state}getTicksPerPeriod(){return this.counter}getTicksSum(){return this.sum}resetPeriod(){return this.isDestroyed()&&(0,n.getNegativeStatus)(r.ERROR.INSTANCE_DESTROYED),this.state===r.EState.STARTED&&(0,n.getNegativeStatus)(this.state),this.periodMs=this.defaultPeriodMs,(0,n.getPositiveStatus)(this.state)}setPeriod(e){return this.isDestroyed()&&(0,n.getNegativeStatus)(r.ERROR.INSTANCE_DESTROYED),this.state===r.EState.STARTED&&(0,n.getNegativeStatus)(this.state),"number"!=typeof e||e<0?{isApplied:!1,state:r.ERROR.TYPE_INVALID}:(this.periodMs=e,(0,n.getPositiveStatus)(this.state))}subscribe(e){if(!this.isDestroyed())return this.counter$.subscribe(e)}start(){this.isDestroyed()&&(0,n.getNegativeStatus)(r.ERROR.INSTANCE_DESTROYED),this.state===r.EState.STARTED&&(0,n.getNegativeStatus)(r.EState.STARTED);let e=0;return this.subscriber=this.subject.subscribeOnProcess((()=>{e++,this.sum++})),this.timer=setInterval((()=>{this.counter=e,e=0,this.counter$.next(this.counter),this._state=r.EState.READY}),this.periodMs),this._state=r.EState.STARTED,(0,n.getPositiveStatus)(this.state)}stop(){return this.isDestroyed()&&(0,n.getNegativeStatus)(r.ERROR.INSTANCE_DESTROYED),this.timer&&clearInterval(this.timer),this.subscriber?.unsubscribe(),this.counter=0,this.sum=0,this._state=r.EState.STOPPED,(0,n.getPositiveStatus)(this.state)}isDestroyed(){return this._state===r.EState.DESTROYED}destroy(){return this.stop(),this.counter$.destroy(),this._state=r.EState.DESTROYED,(0,n.getPositiveStatus)(this.state)}}},340:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAvgNum=t.getMinNumNotZero=t.getMinNum=t.getMaxNum=t.getNegativeStatus=t.getPositiveStatus=void 0,t.getPositiveStatus=function(e){return{isApplied:!0,state:e}},t.getNegativeStatus=function(e){return{isApplied:!1,state:e}},t.getMaxNum=function(e,t){return e>t?e:t},t.getMinNum=function(e,t){return e>t?t:e},t.getMinNumNotZero=function(e,t){return 0===e?t:0===t?e:e>t?t:e},t.getAvgNum=function(e,t){return Math.round((e+t)/2)}},265:(e,t,s)=>{t.Ht=t.t$=void 0;s(261),s(888),s(761),s(308),s(875),s(462),s(258),s(491);var r=s(31);Object.defineProperty(t,"t$",{enumerable:!0,get:function(){return r.Measure}});var i=s(31);Object.defineProperty(t,"Ht",{enumerable:!0,get:function(){return i.getDefaultMeasureMeter}})}},t={},s=function s(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}(265),r=function(e,t,s,r){var i,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n<3?i(a):n>3?i(t,s,a):i(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a};class i{someMethod1(){console.log("someMethod1: This method is metered");for(let e=0;e<1e9;e++);}async someMethod2(){await new Promise((e=>setTimeout(e,100))),console.log("someMethod2: This method is metered")}}r([(0,s.t$)()],i.prototype,"someMethod1",null),r([(0,s.t$)()],i.prototype,"someMethod2",null);const n=(0,s.Ht)(),a=new i;a.someMethod2().finally((()=>!0)),a.someMethod2().finally((()=>!0)),a.someMethod2().finally((()=>!0)),a.someMethod2().finally((()=>!0)),a.someMethod2().finally((()=>!0)),a.someMethod2().finally((()=>!0)),a.someMethod2().finally((()=>!0)),a.someMethod2().finally((()=>!0)),a.someMethod2().finally((()=>!0)),a.someMethod2().finally((()=>!0)),a.someMethod1(),a.someMethod1(),a.someMethod1(),a.someMethod1(),a.someMethod1(),a.someMethod1(),a.someMethod1(),setTimeout((()=>{console.log(n.getAll()),n.destroy()}),1e4)})();